define(["core/log"],function(e){"use strict";return{getClosest:function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},getPreviousElement:function(e,t){var r=e.previousElementSibling;if(t)for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}},getDistanceFromCriterionHeader:function(e,t){var r=e.previousElementSibling,n=-1;if(t)for(;r;){if(n++,r.matches(t))return n;r=r.previousElementSibling}},getNextElement:function(e,t){var r=e.nextElementSibling;if(t)for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}},getCriteriaJSON:function(){return JSON.parse(document.getElementById("id_criteria").value)},getLevelsJSON:function(e){return document.getElementById(`advancedgrading-frubric-${e}-leveljson`).value},setCriteriaJSON:function(e){return document.getElementById("id_criteria").value=JSON.stringify(e)},getCriterionFromCriteriaCollection:function(n,e){return e.filter(function(e,t){var r=n.getAttribute("data-criterion-group");if(e.rowindex=t,r==e.id)return e},n)},getRandomID:function(){return Math.floor(9999*Math.random())},getMode:function(){return document.querySelector(".criterion-header").getAttribute("data-mode")},getMinMax:function(e){return-1!=e.indexOf("-")?e.split("-"):e.split("/")},getMaxValueInLevelInCriterion:function(e){const t=[];e=document.querySelectorAll(`.level-${e} .level-mark .fmark`);return Array.from(e).forEach(e=>{e=e.value.split("-");t.push(Number(e[e.length-1]))},t),Math.max(...t)},setHiddenCriteriaJSON:function(e){document.querySelector('input[name="criteriajsonhelper"]').value=JSON.stringify(e)}}});