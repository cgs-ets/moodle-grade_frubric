{"version":3,"sources":["../src/feditor_helper.js"],"names":["define","getClosest","elem","selector","document","parentNode","matches","getPreviousElement","sibling","previousElementSibling","getDistanceFromCriterionHeader","distance","getNextElement","nextElementSibling","getCriteriaJSON","JSON","parse","getElementById","value","getCriteriaJSONShados","getLevelsJSON","criteriaid","setCriteriaJSON","criterioncollection","stringify","getCriterionFromCriteriaCollection","row","filteredCriterion","filter","criterion","index","id","getAttribute","rowindex","getRandomID","Math","floor","random","getMode","querySelector","getMinMax","score","indexOf","split"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Helper\n * @package   gradingform_frubric\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\"core/log\"], function (Log) {\n    \"use strict\";\n\n    return {\n        // Helper function to get the closest parent with a matching selector\n        getClosest: function (elem, selector) {\n            for (; elem && elem !== document; elem = elem.parentNode) {\n                if (elem.matches(selector)) {\n                    return elem;\n                }\n            }\n            return null;\n        },\n\n        getPreviousElement: function (elem, selector) {\n\n            // Get the previous sibling element\n            var sibling = elem.previousElementSibling;\n\n            // If there's no selector return.\n            if (!selector) {\n                return;\n            }\n\n            // If the sibling matches our selector, use it\n            // If not, jump to the next sibling and continue the loop\n            while (sibling) {\n\n                if (sibling.matches(selector)) {\n                    return sibling;\n                }\n                sibling = sibling.previousElementSibling;\n            }\n        },\n\n        getDistanceFromCriterionHeader: function (elem, selector) {\n            var sibling = elem.previousElementSibling;\n            var distance = -1;\n            // If there's no selector return.\n            if (!selector) {\n                return;\n            }\n\n            while (sibling) {\n                distance++;\n                if (sibling.matches(selector)) {\n                    return distance;\n                }\n                sibling = sibling.previousElementSibling;\n            }\n\n        },\n\n        getNextElement: function (elem, selector) {\n            // Get the next sibling element\n            var sibling = elem.nextElementSibling;\n            // If there's no selector, return\n            if (!selector) {\n                return;\n            }\n            // If the sibling matches our selector, use it\n            // If not, jump to the next sibling and continue the loop\n            while (sibling) {\n                if (sibling.matches(selector)) {\n                    return sibling;\n                }\n                sibling = sibling.nextElementSibling;\n            }\n        },\n\n        getCriteriaJSON: function () {\n            return JSON.parse(document.getElementById(\"id_criteria\").value);\n        },\n\n        getCriteriaJSONShados: function () {\n            return JSON.parse(document.getElementById(\"id_criteriajsonshadow\").value);\n        },\n\n        getLevelsJSON: function (criteriaid) {\n            return document.getElementById(`advancedgrading-frubric-${criteriaid}-leveljson`).value;\n        },\n\n        setCriteriaJSON: function (criterioncollection) {\n            return document.getElementById('id_criteria').value = JSON.stringify(criterioncollection);\n        },\n\n        getCriterionFromCriteriaCollection: function (row, criterioncollection) {\n\n            const filteredCriterion = criterioncollection.filter(function (criterion, index) {\n                const id = row.getAttribute('data-criterion-group');\n\n                criterion.rowindex = index;\n                if (id == criterion.id) {\n                    return criterion;\n                }\n            }, row);\n\n            return filteredCriterion;\n        },\n\n        getRandomID: function () {\n            return (Math.floor(Math.random() * 9999));\n        },\n\n        getMode: function () {\n            return document\n                .querySelector(\".criterion-header\")\n                .getAttribute(\"data-mode\");\n        },\n\n        getMinMax: function (score) {\n            if (score.indexOf('-') != -1) {\n                return score.split('-');\n            } else {\n                return score.split('/');\n            }\n        },\n\n    };\n});"],"file":"feditor_helper.min.js"}