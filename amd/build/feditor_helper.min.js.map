{"version":3,"sources":["../src/feditor_helper.js"],"names":["define","getClosest","elem","selector","document","parentNode","matches","getPreviousElement","sibling","previousElementSibling","getDistanceFromCriterionHeader","distance","getNextElement","nextElementSibling","getCriteriaJSON","getElementById","value","JSON","parse","getMode","querySelector","getAttribute"],"mappings":"AAqBAA,OAAM,sCAAC,CAAC,UAAD,CAAD,CAAe,UAAe,CAClC,aAEA,MAAO,CAELC,UAAU,CAAE,oBAAUC,CAAV,CAAgBC,CAAhB,CAA0B,CACpC,KAAOD,CAAI,EAAIA,CAAI,GAAKE,QAAxB,CAAkCF,CAAI,CAAGA,CAAI,CAACG,UAA9C,CAA0D,CACxD,GAAIH,CAAI,CAACI,OAAL,CAAaH,CAAb,CAAJ,CAA4B,CAC1B,MAAOD,CAAAA,CACR,CACF,CACD,MAAO,KACR,CATI,CAWLK,kBAAkB,CAAE,4BAAUL,CAAV,CAAgBC,CAAhB,CAA0B,CAE5C,GAAIK,CAAAA,CAAO,CAAGN,CAAI,CAACO,sBAAnB,CAGA,GAAI,CAACN,CAAL,CAAe,CACb,MACD,CAID,MAAOK,CAAP,CAAgB,CACd,GAAIA,CAAO,CAACF,OAAR,CAAgBH,CAAhB,CAAJ,CAA+B,CAC7B,MAAOK,CAAAA,CACR,CACDA,CAAO,CAAGA,CAAO,CAACC,sBACnB,CACF,CA5BI,CA8BLC,8BAA8B,CAAE,wCAAUR,CAAV,CAAgBC,CAAhB,CAA0B,IACpDK,CAAAA,CAAO,CAAGN,CAAI,CAACO,sBADqC,CAEpDE,CAAQ,CAAG,CAAC,CAFwC,CAIvD,GAAI,CAACR,CAAL,CAAe,CACd,MACD,CAED,MAAOK,CAAP,CAAgB,CACdG,CAAQ,GACR,GAAIH,CAAO,CAACF,OAAR,CAAgBH,CAAhB,CAAJ,CAA+B,CAC7B,MAAOQ,CAAAA,CACR,CACDH,CAAO,CAAGA,CAAO,CAACC,sBACnB,CAEF,CA9CI,CAgDLG,cAAc,CAAE,wBAAUV,CAAV,CAAgBC,CAAhB,CAA0B,CAExC,GAAIK,CAAAA,CAAO,CAAGN,CAAI,CAACW,kBAAnB,CAEA,GAAI,CAACV,CAAL,CAAe,CACb,MACD,CAGD,MAAOK,CAAP,CAAgB,CACd,GAAIA,CAAO,CAACF,OAAR,CAAgBH,CAAhB,CAAJ,CAA+B,CAC7B,MAAOK,CAAAA,CACR,CACDA,CAAO,CAAGA,CAAO,CAACK,kBACnB,CACF,CA/DI,CAiELC,eAAe,CAAE,0BAAY,CAC3B,MAAOV,CAAAA,QAAQ,CAACW,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CACHC,IAAI,CAACC,KAAL,CAAWd,QAAQ,CAACW,cAAT,CAAwB,aAAxB,EAAuCC,KAAlD,CADG,CAEH,EACL,CArEI,CAuELG,OAAO,CAAE,kBAAY,CACnB,MAAOf,CAAAA,QAAQ,CACZgB,aADI,CACU,mBADV,EAEJC,YAFI,CAES,WAFT,CAGR,CA3EI,CA8ER,CAjFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package   gradingform_frubric\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\"core/log\"], function (Log) {\n  \"use strict\";\n\n  return {\n    // Helper function to get the closest parent with a matching selector\n    getClosest: function (elem, selector) {\n      for (; elem && elem !== document; elem = elem.parentNode) {\n        if (elem.matches(selector)) {\n          return elem;\n        }\n      }\n      return null;\n    },\n\n    getPreviousElement: function (elem, selector) {\n      // Get the previous sibling element\n      var sibling = elem.previousElementSibling;\n\n      // If there's no selector return.\n      if (!selector) {\n        return;\n      }\n\n      // If the sibling matches our selector, use it\n      // If not, jump to the next sibling and continue the loop\n      while (sibling) {\n        if (sibling.matches(selector)) {\n          return sibling;\n        }\n        sibling = sibling.previousElementSibling;\n      }\n    },\n\n    getDistanceFromCriterionHeader: function (elem, selector) {\n      var sibling = elem.previousElementSibling;\n      var distance = -1;\n       // If there's no selector return.\n       if (!selector) {\n        return;\n      }\n\n      while (sibling) {\n        distance++;\n        if (sibling.matches(selector)) {\n          return distance;\n        }\n        sibling = sibling.previousElementSibling;\n      }\n\n    },\n\n    getNextElement: function (elem, selector) {\n      // Get the next sibling element\n      var sibling = elem.nextElementSibling;\n      // If there's no selector, return\n      if (!selector) {\n        return;\n      }\n      // If the sibling matches our selector, use it\n      // If not, jump to the next sibling and continue the loop\n      while (sibling) {\n        if (sibling.matches(selector)) {\n          return sibling;\n        }\n        sibling = sibling.nextElementSibling;\n      }\n    },\n\n    getCriteriaJSON: function () {\n      return document.getElementById(\"id_criteria\").value\n        ? JSON.parse(document.getElementById(\"id_criteria\").value)\n        : [];\n    },\n\n    getMode: function () {\n      return document\n        .querySelector(\".criterion-header\")\n        .getAttribute(\"data-mode\");\n    },\n\n  };\n});\n"],"file":"feditor_helper.min.js"}