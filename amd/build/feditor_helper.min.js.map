{"version":3,"sources":["../src/feditor_helper.js"],"names":["define","getClosest","elem","selector","document","parentNode","matches","getPreviousElement","sibling","previousElementSibling","getDistanceFromCriterionHeader","distance","getNextElement","nextElementSibling","getCriteriaJSON","JSON","parse","getElementById","value","getLevelsJSON","criteriaid","setCriteriaJSON","criterioncollection","stringify","getCriterionFromCriteriaCollection","row","filteredCriterion","filter","criterion","index","id","getAttribute","rowindex","getRandomID","Math","floor","random","getMode","querySelector","getMinMax","score","indexOf","split"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Helper\n * @package   gradingform_frubric\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\"core/log\"], function (Log) {\n  \"use strict\";\n\n  return {\n    // Helper function to get the closest parent with a matching selector\n    getClosest: function (elem, selector) {\n      for (; elem && elem !== document; elem = elem.parentNode) {\n        if (elem.matches(selector)) {\n          return elem;\n        }\n      }\n      return null;\n    },\n\n    getPreviousElement: function (elem, selector) {\n    \n        // Get the previous sibling element\n      var sibling = elem.previousElementSibling;\n     \n      // If there's no selector return.\n      if (!selector) {\n        return;\n      }\n\n      // If the sibling matches our selector, use it\n      // If not, jump to the next sibling and continue the loop\n      while (sibling) {\n          \n        if (sibling.matches(selector)) {\n          return sibling;\n        }\n        sibling = sibling.previousElementSibling;\n      }\n    },\n\n    getDistanceFromCriterionHeader: function (elem, selector) {\n      var sibling = elem.previousElementSibling;\n      var distance = -1;\n      // If there's no selector return.\n      if (!selector) {\n        return;\n      }\n\n      while (sibling) {\n        distance++;\n        if (sibling.matches(selector)) {\n          return distance;\n        }\n        sibling = sibling.previousElementSibling;\n      }\n\n    },\n\n    getNextElement: function (elem, selector) {\n      // Get the next sibling element\n      var sibling = elem.nextElementSibling;\n      // If there's no selector, return\n      if (!selector) {\n        return;\n      }\n      // If the sibling matches our selector, use it\n      // If not, jump to the next sibling and continue the loop\n      while (sibling) {\n        if (sibling.matches(selector)) {\n          return sibling;\n        }\n        sibling = sibling.nextElementSibling;\n      }\n    },\n\n    getCriteriaJSON: function () {\n      return JSON.parse(document.getElementById(\"id_criteria\").value) ;\n    },\n\n    getLevelsJSON: function(criteriaid) {\n        return document.getElementById(`advancedgrading-frubric-${criteriaid}-leveljson`).value;\n    },\n\n    setCriteriaJSON: function (criterioncollection) {\n      return document.getElementById('id_criteria').value = JSON.stringify(criterioncollection);\n    },\n\n    getCriterionFromCriteriaCollection: function (row, criterioncollection) {\n\n      const filteredCriterion = criterioncollection.filter(function (criterion, index) {\n        const id = row.getAttribute('data-criterion-group');\n\n        criterion.rowindex = index;\n        if (id == criterion.id) {\n          return criterion;\n        }\n      }, row);\n\n      return filteredCriterion;\n    },\n\n    getRandomID: function () {\n      return (Math.floor(Math.random() * 9999));\n    },\n\n    getMode: function () {\n      return document\n        .querySelector(\".criterion-header\")\n        .getAttribute(\"data-mode\");\n    },\n\n    getMinMax: function (score) {\n        if (score.indexOf('-') != -1) {\n            return score.split('-');\n        } else {\n            return score.split('/');\n        }\n    }\n\n  };\n});\n"],"file":"feditor_helper.min.js"}