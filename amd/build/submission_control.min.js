/**
 * @package   gradingform_frubric
 * @copyright 2021 Veronica Bermegui
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("gradingform_frubric/submission_control",["core/log"],(function(Log){function SubmissionControl(definitionID){this.definitionID=definitionID,this.submiteddata=JSON.parse(document.querySelector(".form-frubric-evaluate").getAttribute("data-values")),this.definitionID=document.getElementById("advancedgrading-criteria").getAttribute("data-definition-id")}return SubmissionControl.prototype.main=function(){this.checkCriteria(this.submiteddata),this.checkScore(this.criteria)},SubmissionControl.prototype.checkCriteria=function(){Object.entries(this.submiteddata.criteria).forEach((_ref=>{let[key,value]=_ref;const scoregiven=document.getElementById("advancedgrading-frubric-criteria-".concat(key,"-level-grade"));""!=scoregiven.value?(scoregiven.classList.remove("total-input-error"),document.querySelector("span.frubric-no-descriptor-error").hasAttribute("hidden")||(document.querySelector("span.frubric-no-descriptor-error").hidden=!0)):(scoregiven.classList.add("total-input-error"),document.querySelector("span.frubric-no-descriptor-error").removeAttribute("hidden"));let maxallowed=document.getElementById("advancedgrading-frubric-criteria-".concat(key,"-level-grade-out-of-value")).innerText.split("/");maxallowed=maxallowed[maxallowed.length-1],parseFloat(scoregiven.value)>parseFloat(maxallowed)&&scoregiven.classList.add("total-input-error"),document.querySelector("span.frubric-no-score-error").hasAttribute("hidden")||(document.querySelector("span.frubric-no-score-error").hidden=!0)}))},SubmissionControl.prototype.checkScore=function(){let scoregiven=document.getElementById("advancedgrading-".concat(this.definitionID,"-frubric-total-grade"));scoregiven.classList.remove("total-input-error");let enteredscore=parseFloat(scoregiven.value),maxscore=document.getElementById("advancedgrading-".concat(this.definitionID,"-frubric-total-grade-given")).innerText.split("/");maxscore=parseFloat(maxscore[maxscore.length-1]),(enteredscore>maxscore||enteredscore<0)&&scoregiven.classList.add("total-input-error")},{init:function(submiteddata,definitionID){new SubmissionControl(submiteddata=JSON.parse(submiteddata),definitionID).main(submiteddata,definitionID)}}}));

//# sourceMappingURL=submission_control.min.js.map